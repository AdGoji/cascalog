<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>cascalog.api documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Cascalog-core 1.10.1 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li class="current"><a href="cascalog.api.html"><span>cascalog.api</span></a></li><li><a href="cascalog.conf.html"><span>cascalog.conf</span></a></li><li><a href="cascalog.debug.html"><span>cascalog.debug</span></a></li><li><a href="cascalog.graph.html"><span>cascalog.graph</span></a></li><li><a href="cascalog.io.html"><span>cascalog.io</span></a></li><li><a href="cascalog.ops.html"><span>cascalog.ops</span></a></li><li><a href="cascalog.ops-impl.html"><span>cascalog.ops-impl</span></a></li><li><a href="cascalog.playground.html"><span>cascalog.playground</span></a></li><li><a href="cascalog.predicate.html"><span>cascalog.predicate</span></a></li><li><a href="cascalog.rules.html"><span>cascalog.rules</span></a></li><li><a href="cascalog.tap.html"><span>cascalog.tap</span></a></li><li><a href="cascalog.testing.html"><span>cascalog.testing</span></a></li><li><a href="cascalog.util.html"><span>cascalog.util</span></a></li><li><a href="cascalog.vars.html"><span>cascalog.vars</span></a></li><li><a href="cascalog.workflow.html"><span>cascalog.workflow</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="cascalog.api.html#var-%3C-"><span>&lt;-</span></a></li><li><a href="cascalog.api.html#var-%3F-"><span>?-</span></a></li><li><a href="cascalog.api.html#var-%3F%3C-"><span>?&lt;-</span></a></li><li><a href="cascalog.api.html#var-%3F%3F-"><span>??-</span></a></li><li><a href="cascalog.api.html#var-%3F%3F%3C-"><span>??&lt;-</span></a></li><li><a href="cascalog.api.html#var-cascalog-tap"><span>cascalog-tap</span></a></li><li><a href="cascalog.api.html#var-combine"><span>combine</span></a></li><li><a href="cascalog.api.html#var-compile-flow"><span>compile-flow</span></a></li><li><a href="cascalog.api.html#var-construct"><span>construct</span></a></li><li><a href="cascalog.api.html#var-defmain"><span>defmain</span></a></li><li><a href="cascalog.api.html#var-defmapop"><span>defmapop</span></a></li><li><a href="cascalog.api.html#var-defparallelagg"><span>defparallelagg</span></a></li><li><a href="cascalog.api.html#var-div"><span>div</span></a></li><li><a href="cascalog.api.html#var-get-out-fields"><span>get-out-fields</span></a></li><li><a href="cascalog.api.html#var-hfs-seqfile"><span>hfs-seqfile</span></a></li><li><a href="cascalog.api.html#var-hfs-tap"><span>hfs-tap</span></a></li><li><a href="cascalog.api.html#var-hfs-textline"><span>hfs-textline</span></a></li><li><a href="cascalog.api.html#var-lfs-seqfile"><span>lfs-seqfile</span></a></li><li><a href="cascalog.api.html#var-lfs-tap"><span>lfs-tap</span></a></li><li><a href="cascalog.api.html#var-lfs-textline"><span>lfs-textline</span></a></li><li><a href="cascalog.api.html#var-predmacro"><span>predmacro</span></a></li><li><a href="cascalog.api.html#var-predmacro*"><span>predmacro*</span></a></li><li><a href="cascalog.api.html#var-select-fields"><span>select-fields</span></a></li><li><a href="cascalog.api.html#var-stdout"><span>stdout</span></a></li><li><a href="cascalog.api.html#var-union"><span>union</span></a></li><li><a href="cascalog.api.html#var-with-debug"><span>with-debug</span></a></li><li><a href="cascalog.api.html#var-with-job-conf"><span>with-job-conf</span></a></li><li><a href="cascalog.api.html#var-with-serializations"><span>with-serializations</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>cascalog.api documentation</h2><pre class="doc"></pre><div class="public" id="var-%3C-"><h3>&lt;-</h3><h4 class="macro">macro</h4><div class="usage"><code>(&lt;- outvars &amp; predicates)</code></div><pre class="doc">Constructs a query or predicate macro from a list of
predicates. Predicate macros support destructuring of the input and
output variables.</pre></div><div class="public" id="var-%3F-"><h3>?-</h3><div class="usage"><code>(?- &amp; bindings)</code></div><pre class="doc">Executes 1 or more queries and emits the results of each query to
the associated tap.

Syntax: (?- sink1 query1 sink2 query2 ...)  or (?- query-name sink1
query1 sink2 query2)

 If the first argument is a string, that will be used as the name
for the query and will show up in the JobTracker UI.</pre></div><div class="public" id="var-%3F%3C-"><h3>?&lt;-</h3><h4 class="macro">macro</h4><div class="usage"><code>(?&lt;- &amp; args)</code></div><pre class="doc">Helper that both defines and executes a query in a single call.

Syntax: (?&lt;- out-tap out-vars &amp; predicates) or (?&lt;- &quot;myflow&quot;
out-tap out-vars &amp; predicates) ; flow name must be a static string
within the ?&lt;- form.</pre></div><div class="public" id="var-%3F%3F-"><h3>??-</h3><div class="usage"><code>(??- &amp; args)</code></div><pre class="doc">Executes one or more queries and returns a seq of seqs of tuples
 back, one for each subquery given.

Syntax: (??- query1 query2 ...) or (??- query-name query1 query2 ...)

If the first argument is a string, that will be used as the name
for the query and will show up in the JobTracker UI.</pre></div><div class="public" id="var-%3F%3F%3C-"><h3>??&lt;-</h3><h4 class="macro">macro</h4><div class="usage"><code>(??&lt;- &amp; args)</code></div><pre class="doc">Like ??-, but for ?&lt;-. Returns a seq of tuples.
</pre></div><div class="public" id="var-cascalog-tap"><h3>cascalog-tap</h3><div class="usage"><code>(cascalog-tap source sink)</code></div><pre class="doc">Defines a cascalog tap which can be used to add additional
abstraction over cascading taps.

 'source' can be a cascading tap, subquery, or a cascalog tap.
 'sink' can be a cascading tap, sink function, or a cascalog tap.</pre></div><div class="public" id="var-combine"><h3>combine</h3><div class="usage"><code>(combine &amp; gens)</code></div><pre class="doc">Merge the tuples from the subqueries together into a single
subquery. Doesn't ensure uniqueness of tuples.</pre></div><div class="public" id="var-compile-flow"><h3>compile-flow</h3><div class="usage"><code>(compile-flow &amp; args)</code></div><pre class="doc">Attaches output taps to some number of subqueries and creates a
Cascading flow. The flow can be executed with `.complete`, or
introspection can be done on the flow.

Syntax: (compile-flow sink1 query1 sink2 query2 ...)
or (compile-flow flow-name sink1 query1 sink2 query2)

 If the first argument is a string, that will be used as the name
for the query and will show up in the JobTracker UI.</pre></div><div class="public" id="var-construct"><h3>construct</h3><div class="usage"><code>(construct outvars preds)</code></div><pre class="doc">Construct a query or predicate macro functionally. When
constructing queries this way, operations should either be vars for
operations or values defined using one of Cascalog's def macros. Vars
must be stringified when passed to construct. If you're using
destructuring in a predicate macro, the &amp; symbol must be stringified
as well.</pre></div><div class="public" id="var-defmain"><h3>defmain</h3><h4 class="macro">macro</h4><div class="usage"><code>(defmain name &amp; forms)</code></div><pre class="doc">Defines an AOT-compiled function with the supplied
`name`. Containing namespace must be marked for AOT compilation to
have any effect.</pre></div><div class="public" id="var-defmapop"><h3>defmapop</h3><h4 class="macro">macro</h4><div class="usage"><code>(defmapop name doc-string? attr-map? [fn-args*] body)</code></div><pre class="doc">Defines a custom operation that appends new fields to the input tuple.
</pre></div><div class="public" id="var-defparallelagg"><h3>defparallelagg</h3><h4 class="macro">macro</h4><div class="usage"><code>(defparallelagg name doc-string? attr-map? &amp; {:keys [init-var combine-var]})</code></div><pre class="doc">Binds an efficient aggregator to the supplied symbol. A parallel
aggregator processes each tuple through an initializer function,
then combines the results each tuple's initialization until one
result is achieved. `defparallelagg` accepts two keyword arguments:

:init-var -- A var bound to a fn that accepts raw tuples and returns
an intermediate result; #'one, for example.

:combine-var -- a var bound to a fn that both accepts and returns
intermediate results.

For example,

(defparallelagg sum
:init-var #'identity
:combine-var #'+)

Used as

(sum ?x :&gt; ?y)</pre></div><div class="public" id="var-div"><h3>div</h3><div class="usage"><code>(div f &amp; rest)</code></div><pre class="doc">Perform floating point division on the arguments. Use this instead
of / in Cascalog queries since / produces Ratio types which aren't
serializable by Hadoop.</pre></div><div class="public" id="var-get-out-fields"><h3>get-out-fields</h3><div class="usage"></div><pre class="doc">Get the fields of a generator.
</pre></div><div class="public" id="var-hfs-seqfile"><h3>hfs-seqfile</h3><div class="usage"><code>(hfs-seqfile path &amp; opts)</code></div><pre class="doc">Creates a tap on HDFS using sequence file format. Different
 filesystems can be selected by using different prefixes for `path`.

Supports keyword option for `:outfields`. See `cascalog.tap/hfs-tap`
for more keyword arguments.

 See http://www.cascading.org/javadoc/cascading/tap/Hfs.html and
 http://www.cascading.org/javadoc/cascading/scheme/SequenceFile.html</pre></div><div class="public" id="var-hfs-tap"><h3>hfs-tap</h3><div class="usage"><code>(hfs-tap scheme path-or-file &amp; {:keys [sinkmode sinkparts sink-template source-pattern templatefields], :or {templatefields Fields/ALL}})</code></div><pre class="doc">Returns a Cascading Hfs tap with support for the supplied scheme,
opened up on the supplied path or file object. Supported keyword
options are:

`:sinkmode` - can be `:keep`, `:update` or `:replace`.

`:sinkparts` - used to constrain the segmentation of output files.

`:source-pattern` - Causes resulting tap to respond as a GlobHfs tap
when used as source.

`:sink-template` - Causes resulting tap to respond as a TemplateTap when
used as a sink.

`:templatefields` - When pattern is supplied via :sink-template, this option allows a
subset of output fields to be used in the naming scheme.

See f.ex. the http://docs.cascading.org/cascading/2.0/javadoc/cascading/scheme/local/TextDelimited.html scheme.</pre></div><div class="public" id="var-hfs-textline"><h3>hfs-textline</h3><div class="usage"><code>(hfs-textline path &amp; opts)</code></div><pre class="doc">Creates a tap on HDFS using textline format. Different filesystems
 can be selected by using different prefixes for `path`.

Supports keyword option for `:outfields`. See `cascalog.tap/hfs-tap`
for more keyword arguments.

 See http://www.cascading.org/javadoc/cascading/tap/Hfs.html and
 http://www.cascading.org/javadoc/cascading/scheme/TextLine.html</pre></div><div class="public" id="var-lfs-seqfile"><h3>lfs-seqfile</h3><div class="usage"><code>(lfs-seqfile path &amp; opts)</code></div><pre class="doc">Creates a tap that reads data off of the local filesystem in
 sequence file format.

Supports keyword option for `:outfields`. See `cascalog.tap/lfs-tap`
for more keyword arguments.

 See http://www.cascading.org/javadoc/cascading/tap/Lfs.html and
 http://www.cascading.org/javadoc/cascading/scheme/SequenceFile.html</pre></div><div class="public" id="var-lfs-tap"><h3>lfs-tap</h3><div class="usage"><code>(lfs-tap scheme path-or-file &amp; {:keys [sinkmode sinkparts sink-template source-pattern templatefields], :or {templatefields Fields/ALL}})</code></div><pre class="doc">Returns a Cascading Lfs tap with support for the supplied scheme,
opened up on the supplied path or file object. Supported keyword
options are:

`:sinkmode` - can be `:keep`, `:update` or `:replace`.

`:sinkparts` - used to constrain the segmentation of output files.

`:source-pattern` - Causes resulting tap to respond as a GlobHfs tap
when used as source.

`:sink-template` - Causes resulting tap to respond as a TemplateTap when
used as a sink.

`:templatefields` - When pattern is supplied via :sink-template, this option allows a
subset of output fields to be used in the naming scheme.</pre></div><div class="public" id="var-lfs-textline"><h3>lfs-textline</h3><div class="usage"><code>(lfs-textline path &amp; opts)</code></div><pre class="doc">Creates a tap on the local filesystem using textline format.

Supports keyword option for `:outfields`. See `cascalog.tap/lfs-tap`
for more keyword arguments.

 See http://www.cascading.org/javadoc/cascading/tap/Lfs.html and
 http://www.cascading.org/javadoc/cascading/scheme/TextLine.html</pre></div><div class="public" id="var-predmacro"><h3>predmacro</h3><h4 class="macro">macro</h4><div class="usage"><code>(predmacro &amp; body)</code></div><pre class="doc">A more general but more verbose way to create predicate macros.

Creates a function that takes in [invars outvars] and returns a
list of predicates. When making predicate macros this way, you must
create intermediate variables with gen-nullable-var(s). This is
because unlike the (&lt;- [?a :&gt; ?b] ...) way of doing pred macros,
Cascalog doesn't have a declaration for the inputs/outputs.

See https://github.com/nathanmarz/cascalog/wiki/Predicate-macros
</pre></div><div class="public" id="var-predmacro*"><h3>predmacro*</h3><div class="usage"><code>(predmacro* pred-macro-fn)</code></div><pre class="doc">Functional version of predmacro. See predmacro for details.
</pre></div><div class="public" id="var-select-fields"><h3>select-fields</h3><div class="usage"></div><pre class="doc">
Select fields of a named generator.

Example:
(&lt;- [?a ?b ?sum]
    (+ ?a ?b :&gt; ?sum)
    ((select-fields generator [&quot;?a&quot; &quot;?b&quot;]) ?a ?b))</pre></div><div class="public" id="var-stdout"><h3>stdout</h3><div class="usage"><code>(stdout)</code></div><pre class="doc">Creates a tap that prints tuples sunk to it to standard
output. Useful for experimentation in the REPL.</pre></div><div class="public" id="var-union"><h3>union</h3><div class="usage"><code>(union &amp; gens)</code></div><pre class="doc">Merge the tuples from the subqueries together into a single
subquery and ensure uniqueness of tuples.</pre></div><div class="public" id="var-with-debug"><h3>with-debug</h3><h4 class="macro">macro</h4><div class="usage"><code>(with-debug &amp; body)</code></div><pre class="doc">Wrap queries in this macro to cause debug information for the query
planner to be printed out.</pre></div><div class="public" id="var-with-job-conf"><h3>with-job-conf</h3><h4 class="macro">macro</h4><div class="usage"><code>(with-job-conf conf &amp; body)</code></div><pre class="doc">Modifies the job conf for queries executed within the form. Nested
with-job-conf calls will merge configuration maps together, with
innermost calls taking precedence on conflicting keys.</pre></div><div class="public" id="var-with-serializations"><h3>with-serializations</h3><h4 class="macro">macro</h4><div class="usage"><code>(with-serializations serial-vec &amp; forms)</code></div><pre class="doc">Enables the supplied serializations for queries executed within the
form. Serializations should be provided as a vector of strings or
classes, like so:

(import 'org.apache.hadoop.io.serializer.JavaSerialization)
(with-serializations [JavaSerialization]
   (?&lt;- ...))

Serializations nest; nested calls to with-serializations will merge
and unique with serializations currently specified by other calls to
`with-serializations` or `with-job-conf`.</pre></div></div></body></html>